
# Foodgram - Ð’Ð´Ð¾Ñ…Ð½Ð¾Ð²Ð»ÑÐ¹Ñ‚ÐµÑÑŒ Ð¸ Ð´ÐµÐ»Ð¸Ñ‚ÐµÑÑŒ Ð²ÐºÑƒÑÐ½Ñ‹Ð¼Ð¸ Ð±Ð»ÑŽÐ´Ð°Ð¼Ð¸ ÑÐ¾ Ð²ÑÐµÐ¼ Ð¼Ð¸Ñ€Ð¾Ð¼!

***

#### Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚: primestr.sytes.net

***

# Ð ÑƒÑÑÐºÐ°Ñ Ð²ÐµÑ€ÑÐ¸Ñ

Looking for English version? Check here --> [click](#english-version) or scroll down.

***
***

## Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸:

[![Python](https://img.shields.io/badge/Python-%203.10-blue?style=flat-square&logo=Python)](https://www.python.org/)
[![Django](https://img.shields.io/badge/Django-%203.2.3-blue?style=flat-square&logo=django)](https://www.djangoproject.com/)
[![DRF](https://img.shields.io/badge/DjangoRESTFramework-%20-blue?style=flat-square&logo=django)](https://www.django-rest-framework.org/)
[![Docker](https://img.shields.io/badge/Docker-%2024.0.5-blue?style=flat-square&logo=docker)](https://www.docker.com/)
[![DockerCompose](https://img.shields.io/badge/Docker_Compose-%202.21.0-blue?style=flat-square&logo=docsdotrs)](https://docs.docker.com/compose/)
[![GitHub Actions](https://img.shields.io/badge/GitHub_Actions-%20-blue?style=flat-square&logo=githubactions)](https://github.com/features/actions)
[![Gunicorn](https://img.shields.io/badge/Gunicorn-%2020.1.0-blue?style=flat-square&logo=gunicorn)](https://gunicorn.org/)
[![Nginx](https://img.shields.io/badge/Nginx-%20-blue?style=flat-square&logo=nginx)](https://www.nginx.com/)
[![React](https://img.shields.io/badge/React-%20-blue?style=flat-square&logo=react)](https://react.dev/)
[![React](https://img.shields.io/badge/certbot-%20-blue?style=flat-square&logo=letsencrypt)](https://certbot.eff.org/)

***

## Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»:

Foodgram Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸:

- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÑ†ÐµÐ¿Ñ‚Ð¾Ð²: Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÑ€Ð°ÑÐ¸Ð²Ð¾ Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð½Ñ‹Ðµ Ñ€ÐµÑ†ÐµÐ¿Ñ‚Ñ‹, Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐ¹Ñ‚Ðµ Ñ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸ Ð²Ð°ÑˆÐ¸Ñ… Ð±Ð»ÑŽÐ´ Ð¸ Ñ€Ð°ÑÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð´Ñ€ÑƒÐ³Ð¸Ð¼, ÐºÐ°Ðº Ð¿Ñ€Ð¸Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸Ñ… ÑˆÐ°Ð³ Ð·Ð° ÑˆÐ°Ð³Ð¾Ð¼.

- ÐŸÐ¾Ð¸ÑÐº Ñ€ÐµÑ†ÐµÐ¿Ñ‚Ð¾Ð²: Ð˜Ñ‰Ð¸Ñ‚Ðµ Ñ€ÐµÑ†ÐµÐ¿Ñ‚Ñ‹ Ð¿Ð¾ Ñ‚ÐµÐ³Ð°Ð¼ Ð¸ Ð°Ð²Ñ‚Ð¾Ñ€Ð°Ð¼.

- Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð² Ð¸Ð·Ð±Ñ€Ð°Ð½Ð½Ð¾Ðµ: Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐ¹Ñ‚Ðµ Ð¿Ð¾Ð½Ñ€Ð°Ð²Ð¸Ð²ÑˆÐ¸ÐµÑÑ Ñ€ÐµÑ†ÐµÐ¿Ñ‚Ñ‹ Ð² ÑÐ²Ð¾ÑŽ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑŽ Ð¸Ð·Ð±Ñ€Ð°Ð½Ð½Ñ‹Ñ…, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð»ÐµÐ³ÐºÐ¾ Ð½Ð°Ð¹Ñ‚Ð¸ Ð¸Ñ… Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐ¼.

- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ð¾ÐºÑƒÐ¿Ð¾Ðº: Ð¡Ð¾Ð·Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ ÑÐ¿Ð¸ÑÐ¾Ðº Ð¿Ð¾ÐºÑƒÐ¿Ð¾Ðº Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Ð¸Ð½Ð³Ñ€ÐµÐ´Ð¸ÐµÐ½Ñ‚Ð¾Ð², Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð³Ð¾Ñ‚Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ñ… Ð±Ð»ÑŽÐ´, Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐ¹Ñ‚Ðµ ÐµÐ³Ð¾. ÐŸÐ¾Ð·Ð¶Ðµ Ð²Ñ‹ ÑÐ¼Ð¾Ð¶ÐµÑ‚Ðµ ÑÐºÐ°Ñ‡Ð°Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ ÑÐ¿Ð¸ÑÐ¾Ðº Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ PDF Ð¸ Ñ€Ð°ÑÐ¿ÐµÑ‡Ð°Ñ‚Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð·Ð°Ð±Ñ‹Ñ‚ÑŒ Ð¿Ñ€Ð¸ Ð¿Ð¾Ñ…Ð¾Ð´Ðµ Ð² Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½.

- ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ° Ð½Ð° Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð²: Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑ‹Ð²Ð°Ñ‚ÑŒÑÑ Ð½Ð° Ð°Ð²Ñ‚Ð¾Ñ€Ð¾Ð², Ñ‡ÑŒÐ¸ Ñ€ÐµÑ†ÐµÐ¿Ñ‚Ñ‹ Ð²Ð°Ñ Ð²Ð´Ð¾Ñ…Ð½Ð¾Ð²Ð»ÑÑŽÑ‚, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²ÑÐµÐ³Ð´Ð° Ð±Ñ‹Ñ‚ÑŒ Ð² ÐºÑƒÑ€ÑÐµ Ð¸Ñ… Ð½Ð¾Ð²Ñ‹Ñ… ÐºÑƒÐ»Ð¸Ð½Ð°Ñ€Ð½Ñ‹Ñ… Ð¸Ð´ÐµÐ¹.

***

## Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸:

Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ Ð²ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ð² ÑÐµÐ±Ñ Ð´Ð²Ð° Ñ„Ð°Ð¹Ð»Ð° **docker-compose.yml** Ð¸ 
**docker-compose.production.yml**, Ñ‡Ñ‚Ð¾ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ñ€Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð½Ð°
Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð¸Ð»Ð¸ ÑƒÐ´Ð°Ð»Ñ‘Ð½Ð½Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ð°Ñ….

Ð”Ð°Ð½Ð½Ð°Ñ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ Ð¿Ð¾Ð´Ñ€Ð°Ð·ÑƒÐ¼ÐµÐ²Ð°ÐµÑ‚, Ñ‡Ñ‚Ð¾ Ð½Ð° Ð²Ð°ÑˆÐµÐ¼ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼/ÑƒÐ´Ð°Ð»Ñ‘Ð½Ð½Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ ÑƒÐ¶Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Git, Python 3.10, Ð¿Ð°ÐºÐµÑ‚Ð½Ñ‹Ð¹ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€ pip, Docker, Docker Compose, ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚Ð° Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ python3-venv.

Ð’ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ Ð¿Ñ€ÐµÐ´ÑƒÑÐ¼Ð¾Ñ‚Ñ€ÐµÐ½Ð° Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð‘Ð” SQLite3 Ð¸ PostgreSQL. Ð’Ñ‹Ð±Ð¾Ñ€ Ð‘Ð” Ð¾ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð»ÑÐµÑ‚ÑÑ ÑÐ¼ÐµÐ½Ð¾Ð¹ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ DEBUG Ð½Ð° True Ð¸Ð»Ð¸ False. True = SQLite3, False = PostgreSQL.

Ð¡ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ñ‹Ð¼Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¾Ð·Ð½Ð°ÐºÐ¾Ð¼Ð¸Ñ‚ÑŒÑÑ Ð½Ð¸Ð¶Ðµ.

***

## Ð—Ð°Ð¿ÑƒÑÐº Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ Ð² Docker-ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°Ñ… Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Docker Compose

Ð¡ÐºÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð¸Ð· Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ:

```shell
git clone https://github.com/PrimeStr/foodgram-project-react.git
```


ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°:

```shell
cd foodgram-project-react/
```

ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ **infra** Ð¸ ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð» **.env**:

```shell
cd infra/
```

```shell
nano .env
```

Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÑÑ‚Ñ€Ð¾ÐºÐ¸, ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð¸ÐµÑÑ Ð² Ñ„Ð°Ð¹Ð»Ðµ **.env.example** Ð¸ Ð¿Ð¾Ð´ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ 
ÑÐ²Ð¾Ð¸ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ.

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¸Ð· .env Ñ„Ð°Ð¹Ð»Ð°:

```dotenv
# Ð‘Ð” Ð²Ñ‹Ð±Ð¸Ñ€Ð°ÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ ÐºÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ñ‹ DEBUG. Ð•ÑÐ»Ð¸ DEBUG = True , Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ SQLite3.
# Ð•ÑÐ»Ð¸ DEBUG = False , Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ PostgreSQL.

POSTGRES_USER=django_user            # Ð’Ð°ÑˆÐµ Ð¸Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð´Ð»Ñ Ð±Ð´
POSTGRES_PASSWORD=django             # Ð’Ð°Ñˆ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð´Ð»Ñ Ð±Ð´
POSTGRES_DB=django                   # ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð²Ð°ÑˆÐµÐ¹ Ð±Ð´
DB_HOST=db                           # Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ - db
DB_PORT=5432                         # Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ - 5432


SECRET_KEY=DJANGO_SECRET_KEY         # Ð’Ð°Ñˆ ÑÐµÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Django
DEBUG=False                          # True - Ð²ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð”ÐµÐ±Ð°Ð³. Ð˜Ð»Ð¸ Ð¾ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ Ð´Ð»Ñ False
IS_LOGGING=False                     # True - Ð²ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ. Ð˜Ð»Ð¸ Ð¾ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ Ð´Ð»Ñ False
ALLOWED_HOSTS=127.0.0.1              # Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð°Ð´Ñ€ÐµÑÐ¾Ð², Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð°Ð¼Ð¸

# ÐŸÐ¾Ð¼Ð½Ð¸Ñ‚Ðµ, ÐµÑÐ»Ð¸ Ð²Ñ‹ Ð²Ñ‹ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚Ðµ DEBUG=False, Ñ‚Ð¾ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð±ÑƒÐ´ÐµÑ‚ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº ALLOWED_HOSTS.
# 127.0.0.1 ÑÐ²Ð»ÑÐµÑ‚ÑÑ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸ÐµÐ¼. Ð‘ÐµÐ· Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð¾Ð² Ð¸ Ð¸Ð½Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð².
```

Ð’ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ **infra** Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ñ„Ð°Ð¹Ð» **docker-compose.yml**, Ñ 
Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ Ð² Docker ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°Ñ….

ÐÐ°Ñ…Ð¾Ð´ÑÑÑŒ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ **infra** Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÑƒÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ:
> **ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ.** Ð•ÑÐ»Ð¸ Ð½ÑƒÐ¶Ð½Ð¾ - Ð´Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð² ÐºÐ¾Ð½ÐµÑ† ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ñ„Ð»Ð°Ð³ **-d** Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ°
> Ð² Ñ„Ð¾Ð½Ð¾Ð²Ð¾Ð¼ Ñ€ÐµÐ¶Ð¸Ð¼Ðµ.
```shell
sudo docker compose -f docker-compose.yml up
```

ÐžÐ½Ð° ÑÐ±Ð¸Ð»Ð´Ð¸Ñ‚ Docker Ð¾Ð±Ñ€Ð°Ð·Ñ‹ Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ backend, frontend, Ð¡Ð£Ð‘Ð” Ð¸ Nginx Ð² 
Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ñ… Docker ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°Ñ….

Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ðµ Ñ backend:

```shell
sudo docker compose -f docker-compose.yml exec foodgram-backend python manage.py migrate
```

Ð¡Ð¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÑÑ‚Ð°Ñ‚Ð¸ÐºÑƒ backend'a:

```shell
sudo docker compose -f docker-compose.yml exec foodgram-backend python manage.py collectstatic
```

ÐŸÐ¾ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ð¸ Ð²ÑÐµÑ… Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð±ÑƒÐ´ÐµÑ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ
http://127.0.0.1/

Ð”Ð»Ñ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Docker ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð², Ð½Ð°Ñ…Ð¾Ð´ÑÑÑŒ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ **infra** Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ 
ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÑƒÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ:

```shell
sudo docker compose -f docker-compose.yml down
```

Ð›Ð¸Ð±Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Docker Compose Ð² Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»Ðµ, Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð²Ñ‹ ÐµÐ³Ð¾
Ð·Ð°Ð¿ÑƒÑÐºÐ°Ð»Ð¸, ÑÐ¾Ñ‡ÐµÑ‚Ð°Ð½Ð¸ÐµÐ¼ ÐºÐ»Ð°Ð²Ð¸Ñˆ **CTRL+C**.

***

# CI/CD - Ð Ð°Ð·Ð²Ñ‘Ñ€Ñ‚ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð½Ð° ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ

Ð’ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ ÑƒÐ¶Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Workflow Ð´Ð»Ñ GitHub Actions.

Ð’Ð°Ñˆ GitHub Actions ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚:

- ðŸ§ª Ð¢ÐµÑÑ‚Ñ‹: Ð—Ð°Ð¿ÑƒÑÐºÐ°ÑŽÑ‚ÑÑ Ñ‚ÐµÑÑ‚Ñ‹ Ð´Ð»Ñ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°.
- ðŸ—ï¸ Ð¡Ð±Ð¾Ñ€ÐºÑƒ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²: Git Action ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ Docker-Ð¾Ð±Ñ€Ð°Ð·Ñ‹ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ.
- ðŸš€ Ð”ÐµÐ¿Ð»Ð¾Ð¹: ÐžÐ±Ñ€Ð°Ð·Ñ‹ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÑŽÑ‚ÑÑ Ð½Ð° Ð²Ð°Ñˆ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ DockerHub, Ð¿Ñ€Ð¾ÐµÐºÑ‚
Ð´ÐµÐ¿Ð»Ð¾Ð¸Ñ‚ÑÑ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€.
- âœ‰ï¸ Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ: Ð’ ÑÐ»ÑƒÑ‡Ð°Ðµ ÑƒÑÐ¿ÐµÑ…Ð° Ð²Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð² Telegram.

Ð¤Ð¾Ñ€ÐºÐ½Ð¸Ñ‚Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹, Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² GitHub Ð² Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ â€” 
**Settings**, Ð½Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð½Ð° Ð¿Ð°Ð½ÐµÐ»Ð¸ ÑÐ»ÐµÐ²Ð° Ð¿ÑƒÐ½ÐºÑ‚
**Secrets and Variables**, Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² **Actions**, Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ
**New repository secret**.

Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÐºÐ»ÑŽÑ‡Ð¸:

> **ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ.** ÐŸÑ€Ð¸ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸ Ðº Ð²Ð°ÑˆÐµÐ¼Ñƒ ÑƒÐ´Ð°Ð»Ñ‘Ð½Ð½Ð¾Ð¼Ñƒ ÑÐµÑ€Ð²ÐµÑ€Ñƒ Ð²Ð¾Ñ€ÐºÐµÑ€ GitHub 
> Actions ÑÐ¾Ð·Ð´Ð°ÑÑ‚ .env Ñ„Ð°Ð¹Ð», ÑÐ¾Ð·Ð´Ð°ÑÑ‚ Ð‘Ð” Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ñ backend'Ð¾Ð¼, 
> Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑ ÑÑ‚Ð¸ ÐºÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ñ‹.

```
# ÐžÐ±Ñ‰Ð¸Ðµ ÑÐµÐºÑ€ÐµÑ‚Ñ‹
DOCKER_USERNAME (Ð’Ð°Ñˆ Ð»Ð¾Ð³Ð¸Ð½ Ð² DockerHub)
DOCKER_PASSWORD (Ð’Ð°Ñˆ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð² DockerHub)
HOST (IP Ð°Ð´Ñ€ÐµÑ Ð²Ð°ÑˆÐµÐ³Ð¾ ÑƒÐ´Ð°Ð»Ñ‘Ð½Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°)
USER (Ð›Ð¾Ð³Ð¸Ð½ Ð²Ð°ÑˆÐµÐ³Ð¾ ÑƒÐ´Ð°Ð»Ñ‘Ð½Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°)
SSH_KEY (SSH ÐºÐ»ÑŽÑ‡ Ð²Ð°ÑˆÐµÐ³Ð¾ ÑƒÐ´Ð°Ð»Ñ‘Ð½Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°)
SSH_PASSPHRASE (ÐŸÐ°Ñ€Ð¾Ð»ÑŒ Ð²Ð°ÑˆÐµÐ³Ð¾ ÑƒÐ´Ð°Ð»Ñ‘Ð½Ð½Ð¾Ð³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°)
TELEGRAM_TO (Ð’Ð°Ñˆ ID Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð² Telegram)
TELEGRAM_TOKEN (Ð¢Ð¾ÐºÐµÐ½ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð±Ð¾Ñ‚Ð° Ð² Telegram)

# PostgreSQL
POSTGRES_USER(Ð’Ð°ÑˆÐµ Ð¸Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð´Ð»Ñ Ð±Ð´)
POSTGRES_PASSWORD(Ð’Ð°Ñˆ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð´Ð»Ñ Ð±Ð´)
POSTGRES_DB(ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð²Ð°ÑˆÐµÐ¹ Ð±Ð´)
DB_HOST(ÐÐ´Ñ€ÐµÑ Ð±Ð´. Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ - db)
DB_PORT(ÐŸÐ¾Ñ€Ñ‚ Ð±Ð´. Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ - 5432)

# Django
SECRET_KEY(Ð’Ð°Ñˆ ÑÐµÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Django)
DEBUG(Ð’ÐºÐ»/Ð²Ñ‹ÐºÐ» DEBUG)
IS_LOGGING(Ð’ÐºÐ»/Ð²Ñ‹ÐºÐ» Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ)
ALLOWED_HOSTS(Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð°Ð´Ñ€ÐµÑÐ¾Ð², Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð°Ð¼Ð¸)
```

> **Ð’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ!** Ð”Ð»Ñ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾Ð³Ð¾ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹ Ð½Ðµ Ð·Ð°Ð±ÑƒÐ´ÑŒÑ‚Ðµ Ð¿Ð¾Ð¼Ð¸Ð¼Ð¾ 
localhost Ð¸ 127.0.0.1 Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² ALLOWED_HOSTS Ð´Ð¾Ð¼ÐµÐ½Ð½Ð¾Ðµ Ð¸Ð¼Ñ Ð²Ð°ÑˆÐµÐ³Ð¾ ÑÐ°Ð¹Ñ‚Ð°.

ÐŸÑ€Ð¸Ð¼ÐµÑ€ PostgreSQL Ð¸ Django ÐºÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚ Ð¸Ð· .env Ñ„Ð°Ð¹Ð»Ð°:

```dotenv
POSTGRES_USER=django_user            # Ð’Ð°ÑˆÐµ Ð¸Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð´Ð»Ñ Ð±Ð´
POSTGRES_PASSWORD=django             # Ð’Ð°Ñˆ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð´Ð»Ñ Ð±Ð´
POSTGRES_DB=django                   # ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð²Ð°ÑˆÐµÐ¹ Ð±Ð´
DB_HOST=db                           # Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ - db
DB_PORT=5432                         # Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ - 5432

SECRET_KEY=DJANGO_SECRET_KEY         # Ð’Ð°Ñˆ ÑÐµÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Django
DEBUG=False                          # True - Ð²ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð”ÐµÐ±Ð°Ð³. Ð˜Ð»Ð¸ Ð¾ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ Ð´Ð»Ñ False
IS_LOGGING=False                     # True - Ð²ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ. Ð˜Ð»Ð¸ Ð¾ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ Ð¿ÑƒÑÑ‚Ñ‹Ð¼ Ð´Ð»Ñ False
ALLOWED_HOSTS=127.0.0.1              # Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð°Ð´Ñ€ÐµÑÐ¾Ð², Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð°Ð¼Ð¸
```

### **Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ñ€Ð¸ÑÑ‚ÑƒÐ¿Ð°Ñ‚ÑŒ Ðº Ð´ÐµÐ¿Ð»Ð¾ÑŽ**

> **Ð’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ!** Ð”Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐ¸Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð¿Ð¾Ð´Ñ€Ð°Ð·ÑƒÐ¼ÐµÐ²Ð°ÑŽÑ‚ Ñ‡Ñ‚Ð¾ Ð½Ð° Ð²Ð°ÑˆÐµÐ¼ ÑƒÐ´Ð°Ð»Ñ‘Ð½Ð½Ð¾Ð¼ 
> ÑÐµÑ€Ð²ÐµÑ€Ðµ Nginx ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ ÐºÐ°Ðº Ð¿Ñ€Ð¾ÐºÑÐ¸-ÑÐµÑ€Ð²ÐµÑ€. Ð˜Ð·Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ð¾ Nginx Ð² 
> Docker-ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ðµ ÑÐ»ÑƒÑˆÐ°ÐµÑ‚ Ð¿Ð¾Ñ€Ñ‚ 8500.

Ð’ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ Ð·Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð² Ñ„Ð°Ð¹Ð»Ðµ **docker-compose.production.yml** Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ
Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð² Ð² ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ð¸ Ñ Ð²Ð°ÑˆÐ¸Ð¼ Ð»Ð¾Ð³Ð¸Ð½Ð¾Ð¼ Ð½Ð° DockerHub Ð² Ð½Ð¸Ð¶Ð½ÐµÐ¼ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ðµ
(ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ **your_name/foodgram_backend**)

ÐÐ½Ð°Ð»Ð¾Ð³Ð¸Ñ‡Ð½Ð¾ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð² Ð¸ Ð² Ñ„Ð°Ð¹Ð»Ðµ **main.yml**, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ
Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ **/.github/workflows/**.

ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÑÑŒ Ðº Ð²Ð°ÑˆÐµÐ¼Ñƒ ÑƒÐ´Ð°Ð»Ñ‘Ð½Ð½Ð¾Ð¼Ñƒ ÑÐµÑ€Ð²ÐµÑ€Ñƒ Ð»ÑŽÐ±Ñ‹Ð¼ ÑƒÐ´Ð¾Ð±Ð½Ñ‹Ð¼ ÑÐ¿Ð¾ÑÐ¾Ð±Ð¾Ð¼. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð²
Ð´Ð¾Ð¼Ð°ÑˆÐ½ÐµÐ¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ñ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÐµÐ¼ **foodgram** Ð¸ Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ð½ÐµÑ‘.

```shell
mkdir foodgram
```

Ð“Ð¾Ñ‚Ð¾Ð²Ð¾.

Ð’ÐµÑÑŒ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½! ÐšÐ°Ðº Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð²Ñ‹ Ð¸Ð½Ð¸Ñ†Ð¸Ð¸Ñ€ÑƒÐµÑ‚Ðµ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚ Ð½Ð° Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ 
Ð¼Ð°ÑˆÐ¸Ð½Ðµ Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð½Ð° GitHub, GitHub Actions Ð±ÐµÑ€ÐµÑ‚ Ð´ÐµÐ»Ð¾ Ð² ÑÐ²Ð¾Ð¸ Ñ€ÑƒÐºÐ¸:

```shell
git add .
```

```shell
git commit -m "Ð’Ð°ÑˆÐµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚Ð°."
```

```shell
git push
```

ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² ÑÐ²Ð¾Ñ‘Ð¼ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ Ð½Ð° GitHub Ð²Ð¾
Ð²ÐºÐ»Ð°Ð´ÐºÑƒ **Actions**. Ð’Ñ‹ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Actions. ÐŸÐ¾ÑÐ»Ðµ Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹
Ð²Ð¾Ñ€ÐºÐµÑ€Ð° Ð² Ð²Ð°Ñˆ Telegram Ð¿Ñ€Ð¸Ð´Ñ‘Ñ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾Ñ‚ Ð±Ð¾Ñ‚Ð°:

> Ð”ÐµÐ¿Ð»Ð¾Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Foodgram ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½!

**Ð”Ð°Ð½Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾Ð·Ð½Ð°Ñ‡Ð°ÐµÑ‚ Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¾ÐµÐºÑ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ, Ð¿Ñ€Ð¾Ð²ÐµÐ´ÐµÐ½Ñ‹ 
Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸ Ð¸ ÑÐ¾Ð±Ñ€Ð°Ð½Ð° ÑÑ‚Ð°Ñ‚Ð¸ÐºÐ° backend'Ð°.**

ÐŸÐ¾ÑÐ»Ðµ ÑÑ‚Ð¾Ð³Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒÑÑ Ð½Ð° ÑƒÐ´Ð°Ð»Ñ‘Ð½Ð½Ñ‹Ð¹ ÑÐµÑ€Ð²ÐµÑ€, Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ **foodgram** Ð¸
ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÑƒÐ¿ÐµÑ€Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ: 

```shell
sudo docker compose -f docker-compose.production.yml exec backend python manage.py createsuperuser
```

>**Ð’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ! :** Ð”Ð»Ñ Ð¿Ð¾Ð»Ð½Ð¾Ñ†ÐµÐ½Ð½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð½Ð° Ð²Ð°ÑˆÐµÐ¼ ÑƒÐ´Ð°Ð»Ñ‘Ð½Ð½Ð¾Ð¼ ÑÐµÑ€Ð²ÐµÑ€Ðµ 
Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½, Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ð¸ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ **Nginx**. Ð£Ð´Ð¾ÑÑ‚Ð¾Ð²ÐµÑ€ÑŒÑ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾ 
Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³Ðµ Ð¿Ð¾ Ð²Ð°ÑˆÐµÐ¼Ñƒ Ð´Ð¾Ð¼ÐµÐ½Ð½Ð¾Ð¼Ñƒ Ð¸Ð¼ÐµÐ½Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð° Ð¿ÐµÑ€ÐµÐ°Ð´Ñ€ÐµÑÐ°Ñ†Ð¸Ñ Ð²ÑÐµÑ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð½Ð°
**127.0.0.1:8500** Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð° Ð¿ÐµÑ€ÐµÐ°Ð´Ñ€ÐµÑÐ°Ñ†Ð¸Ñ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¾Ð².

### ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° SSL ÑˆÐ¸Ñ„Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· Let's Encrypt

Ð§Ñ‚Ð¾Ð±Ñ‹ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð¾Ñ‚Ð²ÐµÑ‡Ð°Ð» Ð±Ð°Ð·Ð¾Ð²Ñ‹Ð¼ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð°Ð¼ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ
SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚.

Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ **certbot**:

```shell
sudo apt install snapd
```

```shell
sudo snap install core; sudo snap refresh core
```

```shell
sudo snap install --classic certbot
```

```shell
sudo ln -s /snap/bin/certbot /usr/bin/certbot
```

Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ sertbot Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ ÑÐ²Ð¾Ð¹ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚:

```shell
sudo certbot --nginx
```

ÐŸÐ¾ÑÐ»Ðµ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Nginx:

```shell
sudo systemctl reload nginx
```  

```shell
sudo certbot certificates
```  

> **ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ.** SSL-ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹ Ð¾Ñ‚ Let's Encrypt Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹ Ð² Ñ‚ÐµÑ‡ÐµÐ½Ð¸Ðµ 
90 Ð´Ð½ÐµÐ¹. Ð˜Ñ… Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑ‚ÑŒ. Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ð½Ðµ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð´ÐµÐ»Ð°Ñ‚ÑŒ ÑÑ‚Ð¾ 
ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾, Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð° 
Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð½Ð¸Ð¶Ðµ.

```shell
sudo certbot renew --dry-run
```  

**Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº ÑÐ°Ð¹Ñ‚Ñƒ Ð¿Ð¾ ÐµÐ³Ð¾ Ð´Ð¾Ð¼ÐµÐ½Ð½Ð¾Ð¼Ñƒ Ð¸Ð¼ÐµÐ½Ð¸.**

**ÐšÐ°Ðº Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð²ÑÐµ Ñ€ÐµÑ†ÐµÐ¿Ñ‚Ñ‹ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÑŽÑ‚ÑÑ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ Ð¸ Ð±ÐµÐ· Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼, 
Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐ°Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð´ÐµÐ»Ð¸Ñ‚ÑŒÑÑ ÑÐ²Ð¾Ð¸Ð¼Ð¸ 
ÐºÑƒÐ»Ð¸Ð½Ð°Ñ€Ð½Ñ‹Ð¼Ð¸ ÑˆÐµÐ´ÐµÐ²Ñ€Ð°Ð¼Ð¸.**

***

## ÐÐ²Ñ‚Ð¾Ñ€

**ÐœÐ°ÐºÑÐ¸Ð¼ Ð“Ð¾Ð»Ð¾Ð²Ð¸Ð½**\
Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð·Ð°Ð³Ð»ÑÐ½ÑƒÑ‚ÑŒ Ð² Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð¼Ð¾Ð¸ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ Ð² Ð¼Ð¾ÐµÐ¼ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ðµ GitHub. 
ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ [Ð·Ð´ÐµÑÑŒ](https://github.com/PrimeStr).

***
***

# Foodgram - Get inspired and share delicious dishes with the whole world!

***

#### Project link: primestr.sytes.net

***

# English version

Ð˜Ñ‰ÐµÑ‚Ðµ Ð ÑƒÑÑÐºÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ? Ð’Ð°Ð¼ ÑÑŽÐ´Ð° --> [click](#Ñ€ÑƒÑÑÐºÐ°Ñ-Ð²ÐµÑ€ÑÐ¸Ñ) Ð¸Ð»Ð¸ Ð»Ð¸ÑÑ‚Ð°Ð¹Ñ‚Ðµ Ð²Ð²ÐµÑ€Ñ….

***
***

## Stack:

[![Python](https://img.shields.io/badge/Python-%203.10-blue?style=flat-square&logo=Python)](https://www.python.org/)
[![Django](https://img.shields.io/badge/Django-%203.2.3-blue?style=flat-square&logo=django)](https://www.djangoproject.com/)
[![DRF](https://img.shields.io/badge/DjangoRESTFramework-%20-blue?style=flat-square&logo=django)](https://www.django-rest-framework.org/)
[![Docker](https://img.shields.io/badge/Docker-%2024.0.5-blue?style=flat-square&logo=docker)](https://www.docker.com/)
[![DockerCompose](https://img.shields.io/badge/Docker_Compose-%202.21.0-blue?style=flat-square&logo=docsdotrs)](https://docs.docker.com/compose/)
[![GitHub Actions](https://img.shields.io/badge/GitHub_Actions-%20-blue?style=flat-square&logo=githubactions)](https://github.com/features/actions)
[![Gunicorn](https://img.shields.io/badge/Gunicorn-%2020.1.0-blue?style=flat-square&logo=gunicorn)](https://gunicorn.org/)
[![Nginx](https://img.shields.io/badge/Nginx-%20-blue?style=flat-square&logo=nginx)](https://www.nginx.com/)
[![React](https://img.shields.io/badge/React-%20-blue?style=flat-square&logo=react)](https://react.dev/)
[![React](https://img.shields.io/badge/certbot-%20-blue?style=flat-square&logo=letsencrypt)](https://certbot.eff.org/)

***

## Functionality:

Foodgram provides the following features:

- **Adding and editing recipes**: Create beautifully designed recipes, add 
photos of your dishes and tell others how to cook it step by step.

- **Search for recipes**: Search for recipes by tags and authors.

- **Save to Favorites**: Add your favorite recipes to your favorites 
collection to easily find them in the future.

- **Shopping List**: Create a shopping list based on the ingredients needed to 
prepare selected dishes and save it. Later you will be able to download this 
list in PDF format and print it out so that you don't forget anything when 
going to the store.

- **Subscribe to authors**: You can subscribe to authors whose recipes inspire 
you to always be aware of their new culinary ideas.

***

## Technical features:

The repository includes two files **docker-compose.yml** and
**docker-compose.production.yml**, which allows you to deploy the project on
local or remote servers.

This instruction implies that Git, Python 3.10, pip package manager, Docker, 
Docker Compose and python3-venv virtual environment utility are already 
installed on your local/remote server.

The project provides the ability to run SQLite3 and PostgreSQL databases. 
The database is selected by changing the DEBUG value to True or False. 
True = SQLite3, False = PostgreSQL.

Detailed launch instructions can be found below.

***

## Running a project locally in Docker-containers using Docker Compose:

Clone the project from the repository:

```shell
git clone https://github.com/PrimeStr/foodgram-project-react.git
```


Go to the project directory:

```shell
cd foodgram-project-react/
```

Go to the **infra** directory and create the **.env** file:

```shell
cd infra/
```

```shell
nano .env
```

Add the lines contained in the **.env.example** file and 
substitute your values.

Example from .env file:

```dotenv
# DB is selected automatically based on the DEBUG constant. If DEBUG = True, SQLite3 is used.
# If DEBUG = False, PostgreSQL is used.

POSTGRES_USER=django_user            # Your db username
POSTGRES_PASSWORD=django             # Your db password
POSTGRES_DB=django                   # Name of your database
DB_HOST=db                           # The standard value is db
DB_PORT=5432                         # The standard value is 5432


SECRET_KEY=DJANGO_SECRET_KEY         # Your Django Secret Key
DEBUG=False                          # True - enable Debug. Or leave it empty for False
IS_LOGGING=False                     # True - enable Logging. Or leave it empty for False
ALLOWED_HOSTS=127.0.0.1              # A list of addresses separated by spaces

# Remember, if you set DEBUG=False, you will need to configure the ALLOWED_HOSTS list.
# 127.0.0.1 is the standard value. Without spaces or other characters.
```

The **infra** directory of the project contains the **docker-compose.yml** 
file, with which you can run the project locally in Docker containers.

While in the **infra** directory, run the following command:

> **Note.** If necessary, add the **-d** flag to the end of the command to run
> it in the background.

```shell
sudo docker compose -f docker-compose.yml up
```

It will build Docker images and run backend, frontend, DBMS and Nginx in 
separate Docker containers.

Perform migrations in a container with a backend:

```shell
sudo docker compose -f docker-compose.yml exec foodgram-backend python manage.py migrate
```

Collect backend static:

```shell
sudo docker compose -f docker-compose.yml exec foodgram-backend python manage.py collectstatic
```

Upon completion of all operations, the project will be launched and available 
at http://127.0.0.1/

To stop Docker containers while in the **infra** directory, run 
the following command:

```shell
sudo docker compose -f docker-compose.yml down
```

Or simply shut down Docker Compose in the terminal in which you
launched it, using the keyboard shortcut **CTRL+C**.

***

# CI/CD - Project deployment on a remote server

Workflow for GitHub Actions is already configured in the project.

Your GitHub Actions will independently launch:

- ðŸ§ª Tests: Run tests for your project.
- ðŸ—ï¸ Image Assembly: Get Action creates Docker images of your application.
- ðŸš€ Deployment: Images are sent to your DockerHub repository, the project 
is deployed to the server.
- âœ‰ï¸ Notification: If successful, you will receive a notification in Telegram.

Fork the repository, go to GitHub in the repository settings â€”
**Settings**, find the item on the left panel
**Secrets and Variables**, go to **Actions**, click
**New repository secret**.

Create the following keys:

> **Note.** When connecting to your remote server GitHub Actions worker will 
> create a .env file, create a database and launch a container with a backend,
> using these constants.

```
# Shared secrets
DOCKER_USERNAME (Your login in DockerHub)
DOCKER_PASSWORD (Your password in DockerHub)
HOST (IP address of your remote server)
USER (Login of your remote server)
SSH_KEY (SSH key of your remote server)
SSH_PASSPHRASE (Password of your remote server)
TELEGRAM_TO (Your user ID in Telegram)
TELEGRAM_TOKEN (Token of your bot in Telegram)

# PostgreSQL
POSTGRES_USER (Your db username)
POSTGRES_PASSWORD (Your db password)
POSTGRES_DB (Your DB name)
DB_HOST (Db address. The standard value is db)
DB_PORT (Db port. The standard value is 5432)

# Django
SECRET_KEY (Your Django Secret key)
DEBUG (On/Off DEBUG)
IS_LOGGING (On/Off Logging)
ALLOWED_HOSTS (A list of addresses separated by spaces)
```

> **Attention!** For the correct display of images, do not forget to add the 
> domain name of your site to ALLOWED_HOSTS in addition to localhost 
> and 127.0.0.1.

Example of PostgreSQL and Django constants from .env file:

```dotenv
POSTGRES_USER=django_user            # Your db username
POSTGRES_PASSWORD=django             # Your db password
POSTGRES_DB=django                   # Name of your DB
DB_HOST=db                           # Standard value - db
DB_PORT=5432                         # The standard value is 5432

SECRET_KEY=DJANGO_SECRET_KEY         # Your Django Secret Key
DEBUG=False                          # True - enable Debug. Or leave it empty for False
IS_LOGGING=False                     # True - enable Logging. Or leave it empty for False
ALLOWED_HOSTS=127.0.0.1              # A list of addresses separated by spaces
```

### **Now you can proceed to the deployment**

> **Attention!** Further actions imply that on your remote server
> Nginx is installed and configured as a proxy server. Initially Nginx in
> Docker container listens on port 8500.

In the local project, replace the image names in the 
**docker-compose.production.yml** file in accordance with your login to 
DockerHub in lowercase (For example **your_name/foodgram_backend**)

Similarly, change the names of the images in the **main.yml** file, which 
is located in the **/.github/workflows/** directory.

Connect to your remote server in any convenient way. Create a directory in
your home directory with the name **foodgram** and go to it.

```shell
mkdir foodgram
```

Done.

The whole process is automated! As soon as you initiate a commit on the local 
machine and send the changes to GitHub, GitHub Actions takes matters 
into its own hands:

```shell
git add .
```

```shell
git commit -m "Your message for the commit."
```

```shell
git push
```

After successfully submitting the changes, go to the **Actions** tab in 
your GitHub repository. You will see the Actions process. After the end of
the worker's work, a message from the bot will come to your Telegram:

> Ð”ÐµÐ¿Ð»Ð¾Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Foodgram ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½!

**This message means that the project has been successfully launched on the 
server, migrations have been performed and backend static has been collected.**

After that, you can return to the remote server, to the **foodgram** directory 
and create a superuser:

```shell
sudo docker compose -f docker-compose.production.yml exec backend python manage.py createsuperuser
```

>**Attention! :** For the project to work properly, **Nginx** must be 
installed, configured and running on your remote server. Make sure that 
the config for your domain name is configured to forward all requests to
**127.0.0.1:8500** and header forwarding is added.

### Configuring SSL encryption via Let's Encrypt

In order for the project to meet the basic security standards, you need to 
configure SSL certificate.

Install **certbot**:

```shell
sudo apt install snapd
```

```shell
sudo snap install core; sudo snap refresh core
```

```shell
sudo snap install --classic certbot
```

```shell
sudo ln -s /snap/bin/certbot /usr/bin/certbot
```

Launch sertbot and get your SSL certificate:

```shell
sudo certbot --nginx
```

Then restart Nginx:

```shell
sudo systemctl reload nginx
```  

```shell
sudo certbot certificates
```  

> **Note.** SSL certificates from Let's Encrypt are valid for 90 days. 
They need to be constantly updated. If you don't want to do this yourself, 
you can configure automatic certificate renewal using the command below.

```shell
sudo certbot renew --dry-run
```  

**Now you can access the site by its domain name.**

**As soon as you make sure that all recipes are displayed correctly and 
without problems, you can start inviting users to share their 
culinary masterpieces.**

***

## Author

**Maxim Golovin**\
You can take a look at my other repositories in my GitHub profile. 
Click [here](https://github.com/PrimeStr).
